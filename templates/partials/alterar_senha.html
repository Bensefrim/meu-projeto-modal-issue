{% extends "base.html" %}

{% block title %}Alterar Senha - Sistema de Controle de Pecuária{% endblock %}

{% block content %}
<div class="card" style="max-width: 600px; margin: 0 auto;">
    <div class="card-header">
        <h2 class="card-title">Alterar Senha</h2>
    </div>
    
    <div class="card-body">
        <div id="alert-container"></div>
        
        <form id="alterar-senha-form">
            {% if not is_temp_password %}
            <div class="form-group">
                <label for="senha-atual">Senha Atual</label>
                <input type="password" id="senha-atual" class="form-control" required>
            </div>
            {% endif %}
            
            <div class="form-group">
                <label for="nova-senha">Nova Senha</label>
                <input type="password" id="nova-senha" class="form-control" required>
                <small class="text-muted">A senha deve ter pelo menos 6 caracteres</small>
            </div>
            
            <div class="form-group">
                <label for="confirmar-senha">Confirmar Nova Senha</label>
                <input type="password" id="confirmar-senha" class="form-control" required>
            </div>
            
            <div class="form-group">
                <button type="submit" class="btn btn-primary">Alterar Senha</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', () => {
        // Verificar se é alteração de senha temporária
        const urlParams = new URLSearchParams(window.location.search);
        const isTemp = urlParams.get('temp') === 'true';
        
        if (isTemp) {
            // Adicionar mensagem de alerta
            showAlert('warning', 'Você precisa alterar sua senha temporária antes de continuar.');
            
            // Esconder o header e o footer para forçar a alteração da senha
            document.querySelector('header').style.display = 'none';
            document.querySelector('footer').style.display = 'none';
        }
    });
</script>
{% endblock %}